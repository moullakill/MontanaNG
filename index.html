<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Gestion du Montana - Nation Glory</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    h1 {
      color: #2d2d2d;
    }
    .section {
      background: white;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<h1>Gestion du Montana ðŸ‡ºðŸ‡¸</h1>

<div class="section">
  <h2>Ressources</h2>
  <ul id="ressourcesList"></ul>
  <form id="ressourceForm">
    <input type="text" id="ressourceNom" placeholder="Ressource (ex: fer)" required>
    <input type="number" id="ressourceQuantite" placeholder="QuantitÃ©" required>
    <button type="submit">Ajouter / Modifier</button>
  </form>
</div>

<div class="section">
  <h2>Citoyens</h2>
  <ul id="citoyensList"></ul>
  <form id="citoyenForm">
    <input type="text" id="citoyenNom" placeholder="Nom du citoyen" required>
    <input type="text" id="citoyenRole" placeholder="RÃ´le (ex: Ministre)" required>
    <button type="submit">Ajouter / Modifier</button>
  </form>
</div>

<script>
  // CONFIG FIREBASE
  const firebaseConfig = {
    databaseURL: "https://montana-5b6a2-default-rtdb.europe-west1.firebasedatabase.app/"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // ðŸ”„ Afficher les ressources
  const ressourcesList = document.getElementById('ressourcesList');
  db.ref('ressources').on('value', snapshot => {
    ressourcesList.innerHTML = '';
    const data = snapshot.val();
    for (let key in data) {
      const li = document.createElement('li');
      li.textContent = `${key} : ${data[key]}`;
      ressourcesList.appendChild(li);
    }
  });

  // ðŸ”„ Afficher les citoyens
  const citoyensList = document.getElementById('citoyensList');
  db.ref('citoyens').on('value', snapshot => {
    citoyensList.innerHTML = '';
    const data = snapshot.val();
    for (let key in data) {
      const li = document.createElement('li');
      li.textContent = `${key} - ${data[key]}`;
      citoyensList.appendChild(li);
    }
  });

  // âž• Ajouter une ressource
  document.getElementById('ressourceForm').addEventListener('submit', (e) => {
    e.preventDefault();
    const nom = document.getElementById('ressourceNom').value;
    const quantite = parseInt(document.getElementById('ressourceQuantite').value);
    db.ref('ressources/' + nom).set(quantite);
    e.target.reset();
  });

  // âž• Ajouter un citoyen
  document.getElementById('citoyenForm').addEventListener('submit', (e) => {
    e.preventDefault();
    const nom = document.getElementById('citoyenNom').value;
    const role = document.getElementById('citoyenRole').value;
    db.ref('citoyens/' + nom).set(role);
    e.target.reset();
  });
</script>

</body>
</html>
